{"error":"MongooseError: Cannot call `device_tokens.createIndex()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.\n    at NativeCollection.<computed> [as createIndex] (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongoose\\lib\\drivers\\node-mongodb-native\\collection.js:237:15)\n    at create (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongoose\\lib\\model.js:1757:34)\n    at C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongoose\\lib\\model.js:1715:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","level":"error","message":"Index creation failed","timestamp":"2025-09-06T07:05:57.935Z"}
{"error":"MongooseError: Cannot call `device_tokens.createIndex()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.\n    at NativeCollection.<computed> [as createIndex] (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongoose\\lib\\drivers\\node-mongodb-native\\collection.js:237:15)\n    at create (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongoose\\lib\\model.js:1757:34)\n    at C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongoose\\lib\\model.js:1715:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","level":"error","message":"Index creation failed","timestamp":"2025-09-06T07:17:04.537Z"}
{"error":"MongooseError: Cannot call `device_tokens.createIndex()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.\n    at NativeCollection.<computed> [as createIndex] (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongoose\\lib\\drivers\\node-mongodb-native\\collection.js:237:15)\n    at create (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongoose\\lib\\model.js:1757:34)\n    at C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongoose\\lib\\model.js:1715:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","level":"error","message":"Index creation failed","timestamp":"2025-09-06T07:19:15.824Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:333:26)\n    at async Server.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\command.js:76:16)\n    at async CreateIndexesOperation.execute (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\indexes.js:122:9)\n    at async tryOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.createIndex (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-06T07:29:10.927Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:333:26)\n    at async Server.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\command.js:76:16)\n    at async CreateIndexesOperation.execute (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\indexes.js:122:9)\n    at async tryOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.createIndex (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-06T08:00:56.393Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:333:26)\n    at async Server.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\command.js:76:16)\n    at async CreateIndexesOperation.execute (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\indexes.js:122:9)\n    at async tryOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.createIndex (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-06T08:03:59.222Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:333:26)\n    at async Server.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\command.js:76:16)\n    at async CreateIndexesOperation.execute (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\indexes.js:122:9)\n    at async tryOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.createIndex (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-06T08:16:36.051Z"}
{"error":"MongoPoolClearedError: Connection pool for localhost:27017 was cleared because another operation failed with: \"connection <monitor> to [::1]:27017 timed out\"\n    at ConnectionPool.processWaitQueue (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection_pool.js:449:82)\n    at ConnectionPool.clear (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection_pool.js:243:14)\n    at updateServers (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\topology.js:517:29)\n    at Topology.serverUpdateHandler (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\topology.js:393:9)\n    at Server.<anonymous> (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\topology.js:500:77)\n    at Server.emit (node:events:518:28)\n    at markServerUnknown (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:347:12)\n    at Monitor.<anonymous> (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:56:51)\n    at Monitor.emit (node:events:518:28)\n    at onHeartbeatFailed (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\monitor.js:188:17)","level":"error","message":"Failed to clean up expired tokens","timestamp":"2025-09-07T11:28:30.637Z"}
{"error":"PoolClearedOnNetworkError: Connection to localhost:27017 interrupted due to server monitor timeout\n    at ConnectionPool.interruptInUseConnections (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection_pool.js:253:36)\n    at C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection_pool.js:241:41\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","level":"error","message":"Failed to clean up expired tokens","timestamp":"2025-09-07T11:28:30.701Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:333:26)\n    at async Server.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\command.js:76:16)\n    at async CreateIndexesOperation.execute (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\indexes.js:122:9)\n    at async tryOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.createIndex (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-07T13:27:44.421Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:333:26)\n    at async Server.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\command.js:76:16)\n    at async CreateIndexesOperation.execute (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\indexes.js:122:9)\n    at async tryOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.createIndex (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-07T13:33:00.223Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:333:26)\n    at async Server.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\command.js:76:16)\n    at async CreateIndexesOperation.execute (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\indexes.js:122:9)\n    at async tryOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.createIndex (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T05:15:36.803Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:333:26)\n    at async Server.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\command.js:76:16)\n    at async CreateIndexesOperation.execute (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\indexes.js:122:9)\n    at async tryOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.createIndex (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T05:16:41.431Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\cmap\\connection.js:333:26)\n    at async Server.command (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\sdam\\server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\command.js:76:16)\n    at async CreateIndexesOperation.execute (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\indexes.js:122:9)\n    at async tryOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.createIndex (C:\\Users\\bhumi\\OneDrive\\Desktop\\notification-service\\node_modules\\mongodb\\lib\\collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T05:20:59.522Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T07:10:01.987Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T09:34:41.480Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T10:25:35.822Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T10:40:17.392Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T10:49:28.279Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T11:02:33.025Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T11:13:38.629Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T11:18:51.302Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T11:24:06.294Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T11:44:35.989Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-08T11:49:59.347Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-12T09:41:42.314Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-15T06:57:34.079Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-15T07:25:55.493Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-15T09:08:26.120Z"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:227:23)\n    at file:///app/src/controllers/notificationController.js:821:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-15T09:14:19.422Z","tokenId":"d2ddb16b9ba7a773","userId":"u123"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-15T14:53:42.945Z"}
{"error":"MongoServerError: Error in specification { partialFilterExpression: { status: { $ne: \"expired\" } }, background: true, name: \"lifecycle.expiresAt_1_status_1\", key: { lifecycle.expiresAt: 1, status: 1 }, v: 2 } :: caused by :: Expression not supported in partial index: $not\n    status $eq \"expired\"\n\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-15T18:22:48.522Z"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-15T18:32:54.409Z"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:821:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-15T18:35:57.927Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-15T19:23:51.916Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:821:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-15T19:23:51.927Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-15T19:34:02.838Z"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-16T05:28:18.692Z"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T07:23:32.138Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T07:23:33.176Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T07:23:35.213Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T07:57:10.290Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T07:57:11.326Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T07:57:13.365Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T07:59:46.506Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T07:59:47.533Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T07:59:49.565Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T08:00:11.493Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T08:00:12.527Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T08:00:14.556Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T10:22:20.798Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T10:22:21.841Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T10:22:23.876Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T10:46:07.120Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T10:46:08.142Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T10:46:10.177Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:02:12.029Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:02:13.061Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:02:15.084Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:24:35.877Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:24:36.900Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:24:38.924Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:30:33.826Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:30:34.845Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:30:36.873Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:35:59.548Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:36:00.587Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:36:02.615Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-16T11:40:21.158Z"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-16T11:42:52.583Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-16T11:42:52.616Z","tokenId":"8fcb64b4b4cea51c","userId":"u123"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-17T09:31:14.237Z"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-17T09:40:33.474Z"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T09:45:53.407Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-17T10:42:52.175Z"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T10:43:07.602Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T10:43:07.619Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-17T11:20:58.306Z"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:21:31.508Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:21:31.527Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:21:58.147Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:21:58.160Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:23:53.981Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:23:53.990Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:05.553Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:05.562Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:25.184Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:25.194Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:26.426Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:26.435Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:27.360Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:27.368Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:28.840Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:28.847Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:35.859Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:35.868Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:36.187Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:36.202Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:36.339Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:36.347Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:36.516Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:36.524Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:36.682Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:36.689Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:36.855Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:36.863Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:37.067Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:37.076Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:37.280Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:37.289Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:37.498Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:37.506Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:38.395Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:38.402Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:38.604Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:38.612Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:38.807Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:38.815Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:39.019Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:39.028Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:39.254Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:39.262Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:39.501Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:39.507Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:24:39.718Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:827:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:24:39.726Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-17T11:46:48.292Z"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T11:48:23.267Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:48:23.287Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-17T11:52:54.354Z"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T11:54:04.407Z","tokenId":"2370af8913dc6390","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-17T12:01:56.902Z","tokenId":"2370af8913dc6390","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-17T12:01:56.910Z","tokenId":"2370af8913dc6390","userId":"u123"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-17T12:08:58.231Z"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-17T12:56:51.757Z"}
{"error":"MongoServerError: TTL indexes are single-field indexes, compound indexes do not support TTL. Index spec: { expireAfterSeconds: 2592000, partialFilterExpression: { deletion.isDeleted: true }, background: true, name: \"deletion.isDeleted_1_deletion.deletedAt_1\", key: { deletion.isDeleted: 1, deletion.deletedAt: 1 } }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:305:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:333:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:171:29)\n    at async CreateIndexesOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async CreateIndexesOperation.execute (/app/node_modules/mongodb/lib/operations/indexes.js:122:9)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.createIndex (/app/node_modules/mongodb/lib/collection.js:329:25)","level":"error","message":"Index creation failed","timestamp":"2025-09-19T06:50:14.188Z"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-19T07:14:15.221Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-19T07:14:15.242Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-19T07:16:26.559Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-19T07:16:26.573Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-19T07:18:59.193Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-19T07:18:59.203Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-19T07:36:57.507Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-19T07:36:57.521Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-19T07:37:33.133Z","tokenId":"cad00a94a64a877a","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-19T07:41:32.286Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-19T07:41:32.297Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-19T07:44:17.281Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-19T07:44:17.294Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-19T09:04:46.092Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-19T09:04:46.116Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-19T09:10:11.117Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"error":"TypeError: pushService.validateToken is not a function\n    at DeviceTokenSchema.methods.validateToken (file:///app/src/models/DeviceToken.js:238:23)\n    at file:///app/src/controllers/notificationController.js:828:25\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"warn","message":"Token validation failed","timestamp":"2025-09-19T09:10:11.130Z","tokenId":"ad42b5366fd595b5","userId":"u123"}
{"level":"info","message":"Token refreshed","platform":"web","timestamp":"2025-09-19T09:55:38.490Z","tokenId":"539ebd7d1180cf1a","userId":"u123"}
{"error":"MongooseError: Operation `device_tokens.createIndex()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/app/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","level":"error","message":"Index creation failed","timestamp":"2025-09-19T10:39:49.889Z"}
{"error":"MongooseError: Operation `device_tokens.createIndex()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/app/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","level":"error","message":"Index creation failed","timestamp":"2025-09-19T10:55:56.280Z"}
{"error":"MongooseError: Operation `device_tokens.createIndex()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/app/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","level":"error","message":"Index creation failed","timestamp":"2025-09-20T05:35:23.462Z"}
{"error":"ValidationError: DeviceToken validation failed: token: Invalid token format for platform c1RbtZJxWikPOF5IC2JyYY:APA91b....\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3358:32)\n    at /app/node_modules/mongoose/lib/document.js:3119:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","level":"error","message":"Save error","timestamp":"2025-09-22T07:16:53.055Z","tokenId":"d9b767edc11b7e08","userId":"u123"}
